<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch (Archivo)</title>
    <link rel="stylesheet" href="estilos.css">
</head>

<body>
    <h1>Fetch (Archivo) - JavaScript puro</h1>
    <p>La <mark>API fetch</mark> permite acceder a recursos de un servidor de manera <b>asíncrona</b>.
        Este tipo de peticiones permiten realizar solicitudes HTTP <b>sin necesidad de recargar toda la página.</b>
        Para utilizar esta API no es necesario usar ninguna librería.
        Funcionan haciendo uso del código nativo del navegador.</p>
    <p>La API fetch utiliza <mark>promesas</mark>, es decir, devuelve un <b>objeto</b> con dos métodos,
        uno <mark>then()</mark> y otro <mark>catch()</mark> a los que podemos pasar una función
        que se invoca cuando se obtiene una respuesta a esa promesa o se produce un error.</p>
    <p>Presiona el botón para leer el archivo y mostrar su contenido en el documento HTML.</p>
    <p>Luego, analiza la situación.</p>
    <hr>
    <div class="container">
        <button onclick="traerDatosArchivo()">Obtener datos</button>
    </div>

    <div id="contenido">
        <!-- Aquí insertaremos contenido del archivo de texto1.txt -->
    </div>

    <!-- Aqui colocamos nuestro script ------------------------------>
    <script>
        // Creo un objeto que contiene el elemento #contenido del DOM
        let HTML_a_mostrar = document.querySelector('#contenido');

        // Esta función lee los datos del archivo, usando fetch
        function traerDatosArchivo() {
            fetch('texto.txt') // Archivo a leer
                // Cuando ha finalizado la lectura
                //guardo en data el texto leido:
                .then(data => data.text())
                // Y luego copio ese texto en #contenido.
                .then(data => HTML_a_mostrar.innerHTML = data)
        }
    </script>


</body>

</html>